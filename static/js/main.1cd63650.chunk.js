(this["webpackJsonpsn-ts-template"]=this["webpackJsonpsn-ts-template"]||[]).push([[0],{11:function(e,t,n){e.exports={nav:"Navbar_nav__1KpQm",item:"Navbar_item__1T86p",activeLink:"Navbar_activeLink__1Dlvh"}},111:function(e,t,n){e.exports=n.p+"static/media/user.98fd41aa.png"},112:function(e,t,n){e.exports=n.p+"static/media/preloader.088f5f2e.svg"},113:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__1yGOj",img:"ProfileInfo_img__3iXWd"}},114:function(e,t,n){e.exports={item:"Post_item__CkvLJ"}},116:function(e,t,n){e.exports=n(242)},121:function(e,t,n){},122:function(e,t,n){},18:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__M95VY",dialogsItems:"Dialogs_dialogsItems__2nFq3",dialog:"Dialogs_dialog__1OLky",active:"Dialogs_active__3UHKX",messages:"Dialogs_messages__1VmHk",message:"Dialogs_message__1a9NF"}},242:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(48),s=n.n(o),i=(n(121),n(122),n(6)),l=n(11),u=n.n(l),c=n(8);console.log(u.a);var m,d=function(){return r.a.createElement("nav",{className:u.a.nav},r.a.createElement("div",{className:"".concat(u.a.item," ").concat(u.a.active)},r.a.createElement(c.b,{to:"/profile",activeClassName:u.a.activeLink},"Profile")),r.a.createElement("div",{className:u.a.item},r.a.createElement(c.b,{to:"/dialogs",activeClassName:u.a.activeLink},"Message")),r.a.createElement("div",{className:u.a.item},r.a.createElement(c.b,{to:"/users",activeClassName:u.a.activeLink},"Users")),r.a.createElement("div",{className:u.a.item},r.a.createElement(c.b,{to:"/news",activeClassName:u.a.activeLink},"News")),r.a.createElement("div",{className:u.a.item},r.a.createElement(c.b,{to:"/music",activeClassName:u.a.activeLink},"Music")),r.a.createElement("div",{className:u.a.item},r.a.createElement(c.b,{to:"/settings",activeClassName:u.a.activeLink},"Settings")))},p=function(e){return r.a.createElement("div",null,"News")},f=function(e){return r.a.createElement("div",null,"Music")},g=function(e){return r.a.createElement("div",null,"Settings")},E=n(18),h=n.n(E),v=function(e){var t="/dialog/"+e.id;return r.a.createElement("div",{className:h.a.dialog+" "+h.a.active},r.a.createElement(c.b,{to:t},e.name))},S=function(e){return r.a.createElement("div",{className:h.a.message},e.message)},b=n(244),O=n(243),_=n(33),T=n(71),C=n.n(T),P=function(e){e.input;var t=e.meta,n=(e.child,Object(_.a)(e,["input","meta","child"])),a=t.touched&&t.error;return r.a.createElement("div",{className:C.a.formControl+" "+(a?C.a.error:"")},r.a.createElement("div",null,n.children),a&&r.a.createElement("span",null,t.error))},k=function(e){var t=e.input,n=(e.meta,e.child,Object(_.a)(e,["input","meta","child"]));return r.a.createElement(P,e,r.a.createElement("textarea",Object.assign({},t,n)))},w=function(e){var t=e.input,n=(e.meta,e.child,Object(_.a)(e,["input","meta","child"]));return r.a.createElement(P,e,r.a.createElement("input",Object.assign({},t,n)))},y=function(e){if(!e)return"Field is required"},N=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},j=N(10),L=Object(O.a)({form:"dialogAddMessageForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(b.a,{component:k,name:"newMessageBody",placeholder:"Enter your message ",validate:[y,j]})),r.a.createElement("div",null,r.a.createElement("button",null,"Send")))})),U=function(e){var t=e.dialogs.map((function(e){return r.a.createElement(v,{id:e.id,key:e.id,name:e.name})})),n=e.messages.map((function(e){return r.a.createElement(S,{id:e.id,message:e.message,key:e.id})}));return r.a.createElement("div",{className:h.a.dialogs},r.a.createElement("div",{className:h.a.dialogsItems},t),r.a.createElement("div",{className:h.a.messages},r.a.createElement("div",null,n),r.a.createElement(L,{onSubmit:function(t){console.log(t),e.sendMessage(t.newMessageBody)}})))},A=n(7),I=n(5),F=n(110),M=n.n(F).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"api-key":"8eaba7cd-8849-4eb5-b90f-f5fda0cd9786"}}),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return M.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},R=function(e){return M.post("follow/".concat(e))},D=function(e){return M.delete("follow/".concat(e))},x=function(e){return console.warn("Obsolute method. Please profileAPI object"),W.getProfile(e)},W={getProfile:function(e){return M.get("profile/".concat(e))},getStatus:function(e){return M.get("profile/status/".concat(e))},updateStatus:function(e){return M.put("profile/status",{status:e})}},B=function(){return M.get("auth/me")},H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return M.post("auth/login",{email:e,password:t,rememberMe:n})},z=function(){return M.delete("auth/login")};!function(e){e.TOGGLE_IS_FETCHING="TOGGLE/IS_FETCHING",e.TOGGLE_IS_FOLLOWING_PROGRESS="TOGGLE/IS_FOLLOWING_PROGRESS",e.SET_TOTAL_COUNT="USERS/SET_TOTAL_COUNT",e.SET_CURRENT_PAGE="USERS/SET_CURRENT_PAGE",e.SET_USERS="USERS/SET_USERS",e.FOLLOW="USERS/FOLLOW",e.UNFOLLOW="USERS/UNFOLLOW",e.ADD_POST="PROFILE/ADD-POST",e.SET_USER_PROFILE="PROFILE/SET-USER-PROFILE",e.SET_STATUS="PROFILE/SET-STATUS",e.SEND_MESSAGE="DIALOGS/SEND-MESSAGE"}(m||(m={}));var V=function(e){return{type:m.TOGGLE_IS_FETCHING,isFetching:e}},q=function(e,t){return{type:m.TOGGLE_IS_FOLLOWING_PROGRESS,isFetching:e,userId:t}},J=function(e){return{type:m.FOLLOW,id:e}},Z=function(e){return{type:m.UNFOLLOW,id:e}},K=function(e){return{type:m.SET_STATUS,status:e}},Q=function(e){return{isAuth:e.auth.isAuth}};function X(e){return Object(A.b)(Q,{})((function(t){t.isAuth;var n=Object(_.a)(t,["isAuth"]);return t.isAuth?r.a.createElement(e,n):r.a.createElement(i.a,{to:"/login"})}))}var Y=Object(I.d)(Object(A.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:m.SEND_MESSAGE,newMessageBody:e}}(t))}}})),X)(U),$=n(21),ee=n(22),te=n(23),ne=n(24),ae=n(75),re=n.n(ae),oe=n(111),se=n.n(oe),ie=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],a=1;a<=t;a++)n.push(a);return r.a.createElement("div",null,r.a.createElement("div",null,n.map((function(t){return r.a.createElement("span",{className:e.currentPage===t?re.a.selectedPage:"",onClick:function(n){e.onPageChanged(t)}},t)}))),e.users.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(c.b,{to:"/profile/"+t.id},r.a.createElement("img",{src:null!=t.photos.small?t.photos.small:se.a,className:re.a.userPhoto}))),r.a.createElement("div",null,t.followed?r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollowThunkCreator(t.id)}},"Unfollow"):r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.followThunkCreator(t.id)}},"Follow"))),r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("div",null,t.name),r.a.createElement("div",null,t.status)),r.a.createElement("span",null,r.a.createElement("div",null,"u.location.country"),r.a.createElement("div",null,"u.location.city"))))})))},le=n(112),ue=n.n(le),ce=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:ue.a}))},me=function(e){Object(ne.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object($.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.getUsersThunkCreator(t,e.props.pageSize)},e}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(ce,null):null,r.a.createElement(ie,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,followSuccess:this.props.followSuccess,unfollowSuccess:this.props.unfollowSuccess,followingInProgress:this.props.followingInProgress,unfollowThunkCreator:this.props.unfollowThunkCreator,followThunkCreator:this.props.followThunkCreator}))}}]),n}(r.a.Component),de=Object(I.d)(Object(A.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{followSuccess:J,unfollowSuccess:Z,setCurrentPage:function(e){return{type:m.SET_CURRENT_PAGE,currentPage:e}},getUsersThunkCreator:function(e,t){return function(n){n(V(!0)),G(e,t).then((function(e){var t,a;n(V(!1)),n((t=e.items,{type:m.SET_USERS,users:t})),n((a=e.totalCount,{type:m.SET_TOTAL_COUNT,totalUsersCount:a}))}))}},followThunkCreator:function(e){return function(t){t(q(!0,e)),R(e).then((function(n){0===n.data.resultCode&&t(J(e)),t(q(!1,e))}))}},unfollowThunkCreator:function(e){return function(t){t(q(!0,e)),D(e).then((function(n){0===n.data.resultCode&&t(Z(e)),t(q(!1,e))}))}}}),X)(me),pe=n(113),fe=n.n(pe),ge=function(e){Object(ne.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object($.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1,status:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deactivateEditMode=function(){e.setState({editMode:!1}),e.props.updateStatusThunkCreator(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return Object(ee.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return r.a.createElement("div",null,!this.state.editMode&&r.a.createElement("div",null,r.a.createElement("span",{onDoubleClick:this.activateEditMode},this.props.status||"----------------")),this.state.editMode&&r.a.createElement("div",null,r.a.createElement("input",{onChange:this.onStatusChange,autoFocus:!0,onBlur:this.deactivateEditMode,value:this.state.status})))}}]),n}(r.a.Component),Ee=function(e){return e.profile?r.a.createElement("div",null,r.a.createElement("div",{className:fe.a.descriptionBlock},r.a.createElement("img",{src:e.profile.photos.large,alt:""}),r.a.createElement("div",null,e.profile.aboutMe),r.a.createElement("div",null,e.profile.lookingForAJobDescription),r.a.createElement(ge,{status:e.status,updateStatusThunkCreator:e.updateStatusThunkCreator}))):r.a.createElement(ce,null)},he=n(76),ve=n.n(he),Se=n(114),be=n.n(Se),Oe=function(e){return r.a.createElement("div",{className:be.a.item},r.a.createElement("img",{src:"https://avatars.mds.yandex.net/get-pdb/750997/2f4a61ff-0c60-41d6-a2f1-049bc4ee8f21/s1200?webp=false",alt:""}),e.message,r.a.createElement("div",null,r.a.createElement("span",null,"like")," ",e.likeCount))},_e=N(10),Te=Object(O.a)({form:"profileAddNewMyPost"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(b.a,{component:k,name:"newMyPost",placeholder:"Enter your post",validate:[y,_e]})),r.a.createElement("div",null,r.a.createElement("button",null,"Add post")))})),Ce=function(e){console.log(e.posts);var t=e.posts.map((function(e){return r.a.createElement(Oe,{id:e.id,message:e.message,likeCount:e.likeCount})}));return r.a.createElement("div",{className:ve.a.postsBlock},r.a.createElement("h3",null,"My posts"),r.a.createElement(Te,{onSubmit:function(t){e.addPost(t.newMyPost)}}),r.a.createElement("div",{className:ve.a.posts},t))},Pe=Object(A.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(function(e){return{type:m.ADD_POST,newMyPost:e}}(t))}}}))(Ce),ke=function(e){return r.a.createElement("div",null,r.a.createElement(Ee,{profile:e.profile,status:e.status,updateStatusThunkCreator:e.updateStatusThunkCreator}),r.a.createElement(Pe,null))},we=function(e){Object(ne.a)(n,e);var t=Object(te.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=2),this.props.getUserProfileThunkCreator(e),this.props.getStatusThunkCreator(e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ke,Object.assign({},this.props,{profile:this.props.profile,status:this.props.status,updateStatusThunkCreator:this.props.updateStatusThunkCreator})))}}]),n}(r.a.Component),ye=Object(I.d)(Object(A.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status}}),{getUserProfileThunkCreator:function(e){return function(t){x(e).then((function(e){var n;t((n=e.data,{type:m.SET_USER_PROFILE,profile:n}))}))}},getStatusThunkCreator:function(e){return function(t){W.getStatus(e).then((function(e){t(K(e.data))}))}},updateStatusThunkCreator:function(e){return function(t){W.updateStatus(e).then((function(n){0===n.data.resultCode&&t(K(e))}))}}}),i.f,X)(we),Ne=n(77),je=n.n(Ne),Le=function(e){var t;return r.a.createElement("header",{className:je.a.header},r.a.createElement("img",{src:"https://miro.medium.com/max/1200/1*OQOVtYZWdAqGkWmZT4_BFw.jpeg",alt:""}),r.a.createElement("div",{className:je.a.loginBlock},(null===(t=e.auth)||void 0===t?void 0:t.isAuth)?r.a.createElement("div",null,e.auth.login," - ",r.a.createElement("button",{onClick:e.logout})):r.a.createElement(c.b,{to:"/login"},"Login")))},Ue=n(9),Ae={id:null,email:null,login:null,isFetching:!1,isAuth:!1},Ie=function(e,t,n,a,r){return{type:"AUTH-SET-USER-DATA",data:{id:e,email:t,login:n,isFetching:a,isAuth:r}}},Fe=function(){return function(e){B().then((function(t){if(0===t.data.resultCode){var n=t.data.data,a=n.id,r=n.login,o=n.email,s=n.isFetching;n.isAuth;e(Ie(a,r,o,s,!0))}}))}},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH-SET-USER-DATA":return Object(Ue.a)({},e,{},t.data);default:return e}},Ge=function(e){Object(ne.a)(n,e);var t=Object(te.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthUserDataThunk()}},{key:"render",value:function(){return r.a.createElement(Le,Object.assign({},this.props,{auth:this.props.auth,logout:this.props.logout}))}}]),n}(r.a.Component),Re=Object(A.b)((function(e){return{auth:e.auth}}),{getAuthUserDataThunk:Fe,logout:function(){return function(e){z().then((function(t){0===t.data.resultCode&&e(Ie(null,null,null,!1,!1))}))}}})(Ge),De=Object(O.a)({form:"login"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(b.a,{placeholder:"Email",name:"email",component:w,validate:[y]})),r.a.createElement("div",null,r.a.createElement(b.a,{placeholder:"Password",name:"password",component:w,validate:[y],type:"password"})),r.a.createElement("div",null,r.a.createElement(b.a,{type:"checkbox",name:"rememberMe",component:w})," remember me"),r.a.createElement("div",null,r.a.createElement("button",null,"Login")))})),xe=Object(A.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(a){H(e,t,n).then((function(e){0===e.data.resultCode&&a(Fe())}))}}})((function(e){return e.isAuth?r.a.createElement(i.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(De,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}))}));var We=function(){return r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(Re,null),r.a.createElement(d,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(i.b,{path:"/dialogs",render:function(){return r.a.createElement(Y,null)}}),r.a.createElement(i.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(ye,null)}}),r.a.createElement(i.b,{path:"/users",render:function(){return r.a.createElement(de,null)}}),r.a.createElement(i.b,{path:"/news",component:p}),r.a.createElement(i.b,{path:"/music",component:f}),r.a.createElement(i.b,{path:"/settings",component:g}),r.a.createElement(i.b,{path:"/login",render:function(){return r.a.createElement(xe,null)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Be=n(245),He=n(32),ze={posts:[{id:1,message:"Hello",likeCount:12},{id:2,message:"How are you?",likeCount:25}],profile:null,status:""},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.ADD_POST:var n={id:5,message:t.newMyPost,likeCount:0};return Object(Ue.a)({},e,{messageForNewPost:"",posts:[].concat(Object(He.a)(e.posts),[n])});case m.SET_USER_PROFILE:return Object(Ue.a)({},e,{profile:t.profile});case m.SET_STATUS:return Object(Ue.a)({},e,{status:t.status});default:return e}},qe={dialogs:[{id:1,name:"Victor"},{id:2,name:"Valera"},{id:3,name:"Veronika"},{id:4,name:"Alex"},{id:5,name:"Dima"},{id:6,name:"Toxa"}],messages:[{id:1,message:"Hello"},{id:2,message:"How are you?"},{id:3,message:"kikii"},{id:4,message:"Alex"},{id:5,message:"Dima"},{id:6,message:"Toxa"}]},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SEND_MESSAGE:var n=t.newMessageBody;return Object(Ue.a)({},e,{messages:[].concat(Object(He.a)(e.messages),[{id:6,message:n}])});default:return e}},Ze={},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return e},Qe={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.FOLLOW:return Object(Ue.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(Ue.a)({},e,{followed:!0}):e}))});case m.UNFOLLOW:return Object(Ue.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(Ue.a)({},e,{followed:!1}):e}))});case m.SET_USERS:return Object(Ue.a)({},e,{users:t.users});case m.SET_CURRENT_PAGE:return Object(Ue.a)({},e,{currentPage:t.currentPage});case m.SET_TOTAL_COUNT:return Object(Ue.a)({},e,{totalUsersCount:t.totalUsersCount});case m.TOGGLE_IS_FETCHING:return Object(Ue.a)({},e,{isFetching:t.isFetching});case m.TOGGLE_IS_FOLLOWING_PROGRESS:return Object(Ue.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(He.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},Ye=n(115),$e=Object(I.c)({profilePage:Ve,dialogsPage:Je,sidebar:Ke,usersPage:Xe,auth:Me,form:Be.a}),et=Object(I.e)($e,Object(I.a)(Ye.a));window.store=et,console.log(window.store);var tt=et;s.a.render(r.a.createElement(c.a,null,r.a.createElement(A.a,{store:tt},r.a.createElement(We,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,n){e.exports={formControl:"FormsControls_formControl___qzNh",error:"FormsControls_error__31HZd"}},75:function(e,t,n){e.exports={userPhoto:"users_userPhoto__CIWxI",selectedPage:"users_selectedPage__2fG4e"}},76:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__2PbKd",posts:"MyPosts_posts__1RwQ4"}},77:function(e,t,n){e.exports={header:"Header_header__3vImZ",loginBlock:"Header_loginBlock__EIyyf"}}},[[116,1,2]]]);
//# sourceMappingURL=main.1cd63650.chunk.js.map